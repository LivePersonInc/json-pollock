<!doctype html>

<html lang="en">

<head>
  <meta charset="utf-8">
  <style>
    /* CUSTOM STYLES FOR THIS PAGE */
    .take-me-out {
      position: absolute;    
      top: 50%;
      right: 50%;
      width: 100px;
      height: 100px !important;
    }
  </style>
  <title>SC Test</title>
    <link rel="stylesheet" href="/dist/json-pollock.min.css">
  <script src="/dist/json-pollock.js"></script>
  <script>
    window.onload = function () {

      let card = {
        "type": "vertical",
        "elements": [
          {
            "type": "image",
            "url": "https://cdn.bgr.com/2016/08/iphone-8-concept.jpg?quality=98&strip=all",
            "tooltip": "image tooltip",
            "click": {
              "actions": [
                {
                  "type": "navigate",
                  "name": "Navigate to store via image",
                  "lo": 23423423,
                  "la": 2423423423
                }
              ]
            }
          },
          {
            "type": "carousel",
            "padding": 0,
            "elements": [
              {
                "type": "vertical",
                "elements": [
                  {
                    "type": "text",
                    "text": "SIM only plan",
                    "tooltip": "SIM only plan",
                    "rtl": false,
                    "style": {
                      "bold": false,
                      "italic": false,
                      "color": "#000000",
                      "size": "large"
                    }
                  },
                  {
                    "type": "text",
                    "text": "Twelve month plan BYO mobile",
                    "tooltip": "Twelve month plan BYO mobile",
                    "rtl": false,
                    "style": {
                      "bold": true,
                      "italic": false,
                      "color": "#000000"
                    }
                  },
                  {
                    "type": "button",
                    "tooltip": "Choose a plan",
                    "title": "Choose a plan",
                    "click": {
                      "metadata": [
                        {
                          "type": "ExternalId",
                          "id": "ANOTHER_ONE_1"
                        }
                      ],
                      "actions": [
                        {
                          "type": "publishText",
                          "text": "SIM only plan"
                        }
                      ]
                    }
                  }
                ]
              },
              {
                "type": "vertical",
                "elements": [
                  {
                    "type": "text",
                    "text": "Swap plan",
                    "tooltip": "Swap plan",
                    "rtl": false,
                    "style": {
                      "bold": false,
                      "italic": false,
                      "color": "#000000",
                      "size": "large"
                    }
                  },
                  {
                    "type": "text",
                    "text": "Two year plan leasing a mobile",
                    "tooltip": "Two year plan leasing a mobile",
                    "rtl": false,
                    "style": {
                      "bold": true,
                      "italic": false,
                      "color": "#000000"
                    }
                  },
                  {
                    "type": "button",
                    "tooltip": "Choose a plan",
                    "title": "Choose a plan",
                    "click": {
                      "metadata": [
                        {
                          "type": "ExternalId",
                          "id": "ANOTHER_ONE_2"
                        }
                      ],
                      "actions": [
                        {
                          "type": "publishText",
                          "text": "Two year plan leasing a mobile"
                        }
                      ]
                    }
                  }
                ]
              },
              {
                "type": "vertical",
                "elements": [
                  {
                    "type": "text",
                    "text": "Mobiles on a plan",
                    "tooltip": "Mobiles on a plan",
                    "rtl": false,
                    "style": {
                      "bold": false,
                      "italic": false,
                      "color": "#000000",
                      "size": "large"
                    }
                  },
                  {
                    "type": "text",
                    "text": "Two year plan with a mobile",
                    "tooltip": "Two year plan with a mobile",
                    "rtl": false,
                    "style": {
                      "bold": true,
                      "italic": false,
                      "color": "#000000"
                    }
                  },
                  {
                    "type": "button",
                    "tooltip": "Choose a plan",
                    "title": "Choose a plan",
                    "click": {
                      "metadata": [
                        {
                          "type": "ExternalId",
                          "id": "ANOTHER_ONE_3"
                        }
                      ],
                      "actions": [
                        {
                          "type": "publishText",
                          "text": "Mobiles on a plan"
                        }
                      ]
                    }
                  }
                ]
              }
            ]
          },
          {
            "type": "text",
            "text": "product name (Title)",
            "tooltip": "text tooltip",
            "style": {
              "bold": true,
              "size": "large"
            }
          },
          {
            "type": "text",
            "text": "product name (Title)",
            "tooltip": "text tooltip"
          },
          {
            "type": "button",
            "tooltip": "button tooltip",
            "title": "Add to cart",
            "click": {
              "actions": [
                {
                  "type": "link",
                  "name": "Add to cart",
                  "uri": "https://example.com"
                }
              ]
            }
          },
          {
            "type": "horizontal",
            "elements": [
              {
                "type": "button",
                "title": "Buy",
                "tooltip": "Buy this broduct",
                "click": {
                  "actions": [
                    {
                      "type": "link",
                      "name": "Buy",
                      "uri": "https://example.com"
                    }
                  ]
                }
              },
              {
                "type": "button",
                "title": "Find similar",
                "tooltip": "store is the thing",
                "click": {
                  "actions": [
                    {
                      "type": "link",
                      "name": "Buy",
                      "uri": "https://search.com"
                    }
                  ]
                }
              }
            ]
          },
          {
            "type": "button",
            "tooltip": "button tooltip",
            "title": "Publish text",
            "click": {
              "actions": [
                {
                  "type": "publishText",
                  "text": "my text"
                }
              ]
            }
          },
          {
            "type": "map",
            "la": 64.128597,
            "lo": -21.89611,
            "tooltip": "map tooltip"
          },
          {
            "type": "button",
            "tooltip": "button tooltip",
            "title": "Navigate",
            "click": {
              "actions": [
                {
                  "type": "publishText",
                  "text": "my text"
                },
                {
                  "type": "navigate",
                  "name": "Navigate to store via image",
                  "lo": 23423423,
                  "la": 2423423423
                }
              ]
            }
          }
        ]
      }

      const onAfterElementRendered = (element, template) => {
        console.log(element, template.type);
        switch (template.type) {
          case 'vertical':
            element.style = 'border-style:dashed;border-color:red;';
            break;
          case 'image':            
            element.firstElementChild.src = 'https://image.shutterstock.com/image-vector/hacked-glitched-abstract-digital-background-450w-761155144.jpg';
            break;
          case 'button':
            element.firstElementChild.onclick = () => {
              alert('hacked on after render hook!');
            }
            break;
          case 'map':
            element.classList.add('take-me-out');
            break;
          case 'text':
            const color = Math.trunc(Math.random() * 1000000);
            element.firstElementChild.style.color = `#${color}`;
            break;
          default:
            // this will remove the element
            element = null;
        }
        return element;
      };

      JsonPollock.init({
        onAfterElementRendered
      });

      const el = JsonPollock.render(JSON.stringify(card));
      document.getElementById('content').appendChild(el);
    }
  </script>
</head>

<body>
  <div id='content'>
  </div>
</body>

</html>